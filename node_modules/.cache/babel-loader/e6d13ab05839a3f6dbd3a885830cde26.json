{"ast":null,"code":"import _classCallCheck from \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danshafie/Desktop/home_projects/d3/d3_animations/src/components/Letter.js\";\nimport React from \"react\";\nimport * as d3 from \"d3\";\nimport Transition from \"react-transition-group/Transition\";\nvar ExitColor = \"brown\",\n    UpdateColor = \"#333\",\n    EnterColor = \"green\";\n\nvar Letter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Letter, _React$Component);\n\n  function Letter() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Letter);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Letter)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.defaultState = {\n      y: -60,\n      x: _this.props.index * 32,\n      color: EnterColor,\n      fillOpacity: 1e-6\n    };\n    _this.state = _this.defaultState;\n    _this.letterRef = React.createRef();\n\n    _this.onEnter = function () {\n      // Letter enters the visualization\n      var node = d3.select(_this.letterRef.current);\n      node.transition().duration(750).ease(d3.easeCubicInOut).attr(\"y\", 0).style(\"fill-opacity\", 1).on(\"end\", function () {\n        _this.setState({\n          y: 0,\n          fillOpacity: 1,\n          color: UpdateColor\n        });\n      });\n    };\n\n    _this.onExit = function () {\n      // Letter drops out transition\n      var node = d3.select(_this.letterRef.current);\n      node.style(\"fill\", ExitColor).transition(_this.transition).attr(\"y\", 60).style(\"fill-opacity\", 1e-6).on(\"end\", function () {\n        return _this.setState(_this.defaultState);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Letter, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (prevProps.in !== this.props.in && this.props.in) {\n        // A new enter transition has begun\n        this.setState({\n          x: this.props.index * 32\n        });\n      } else if (prevProps.index !== this.props.index) {\n        // Letter is moving to a new location\n        var node = d3.select(this.letterRef.current),\n            targetX = this.props.index * 32;\n        node.style(\"fill\", UpdateColor).transition().duration(750).ease(d3.easeCubicInOut).attr(\"x\", targetX).on(\"end\", function () {\n          return _this2.setState({\n            x: targetX,\n            color: UpdateColor\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          x = _this$state.x,\n          y = _this$state.y,\n          fillOpacity = _this$state.fillOpacity,\n          color = _this$state.color,\n          letter = this.props.letter;\n      return React.createElement(Transition, {\n        in: this.props.in,\n        unmountOnExit: false,\n        timeout: 750,\n        onEnter: this.onEnter,\n        onExit: this.onExit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"text\", {\n        dy: \".35em\",\n        x: x,\n        y: y,\n        style: {\n          fillOpacity: fillOpacity,\n          fill: color,\n          font: \"bold 48px monospace\"\n        },\n        ref: this.letterRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, letter));\n    }\n  }]);\n\n  return Letter;\n}(React.Component);\n\nexport default Letter;","map":{"version":3,"sources":["/Users/danshafie/Desktop/home_projects/d3/d3_animations/src/components/Letter.js"],"names":["React","d3","Transition","ExitColor","UpdateColor","EnterColor","Letter","defaultState","y","x","props","index","color","fillOpacity","state","letterRef","createRef","onEnter","node","select","current","transition","duration","ease","easeCubicInOut","attr","style","on","setState","onExit","prevProps","prevState","in","targetX","letter","fill","font","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as d3 from \"d3\";\nimport Transition from \"react-transition-group/Transition\";\n\nconst ExitColor = \"brown\",\n  UpdateColor = \"#333\",\n  EnterColor = \"green\";\n\nclass Letter extends React.Component {\n  defaultState = {\n    y: -60,\n    x: this.props.index * 32,\n    color: EnterColor,\n    fillOpacity: 1e-6\n  };\n  state = this.defaultState;\n  letterRef = React.createRef();\n\n  onEnter = () => {\n    // Letter enters the visualization\n    let node = d3.select(this.letterRef.current);\n\n    node\n      .transition()\n      .duration(750)\n      .ease(d3.easeCubicInOut)\n      .attr(\"y\", 0)\n      .style(\"fill-opacity\", 1)\n      .on(\"end\", () => {\n        this.setState({\n          y: 0,\n          fillOpacity: 1,\n          color: UpdateColor\n        });\n      });\n  };\n\n  onExit = () => {\n    // Letter drops out transition\n    let node = d3.select(this.letterRef.current);\n\n    node\n      .style(\"fill\", ExitColor)\n      .transition(this.transition)\n      .attr(\"y\", 60)\n      .style(\"fill-opacity\", 1e-6)\n      .on(\"end\", () => this.setState(this.defaultState));\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.in !== this.props.in && this.props.in) {\n      // A new enter transition has begun\n      this.setState({\n        x: this.props.index * 32\n      });\n    } else if (prevProps.index !== this.props.index) {\n      // Letter is moving to a new location\n      let node = d3.select(this.letterRef.current),\n        targetX = this.props.index * 32;\n\n      node\n        .style(\"fill\", UpdateColor)\n        .transition()\n        .duration(750)\n        .ease(d3.easeCubicInOut)\n        .attr(\"x\", targetX)\n        .on(\"end\", () =>\n          this.setState({\n            x: targetX,\n            color: UpdateColor\n          })\n        );\n    }\n  }\n\n  render() {\n    const { x, y, fillOpacity, color } = this.state,\n      { letter } = this.props;\n\n    return (\n      <Transition\n        in={this.props.in}\n        unmountOnExit={false}\n        timeout={750}\n        onEnter={this.onEnter}\n        onExit={this.onExit}\n      >\n        <text\n          dy=\".35em\"\n          x={x}\n          y={y}\n          style={{\n            fillOpacity: fillOpacity,\n            fill: color,\n            font: \"bold 48px monospace\"\n          }}\n          ref={this.letterRef}\n        >\n          {letter}\n        </text>\n      </Transition>\n    );\n  }\n}\n\nexport default Letter;\n"]},"metadata":{},"sourceType":"module"}